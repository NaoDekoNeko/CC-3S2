<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Ademar\OneDrive\Desktop\Practica1-C3S2\Sprint5\ReSOSgame\PruebasSOSgame\UnitTest1.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using ReSOSgame;

namespace PruebasSOSgame
// HU :Historia de Usuario
{
    [TestClass] // Clase de Codigo de Prueba HU.1
    public class TestEmptyBoard
    {
        private static readonly int PreferredSize = 7;

        private readonly Board board = new Board(PreferredSize);

        //Criterio de aceptacion 1.1
        [TestMethod]
        public void NewBoard()
        {
            // Refactorizable - Comprueba que todas las celdas del board est&#233;n vac&#237;as
            for (var row = 0; row &lt; board.Tamanio; row++)
            for (var column = 0; column &lt; board.Tamanio; column++)
                Assert.AreEqual(board.GetCell(row, column), Board.Cell.VACIA);
            // Esto podria ser otro criterio de aceptacion no manual ni automatico
            // Assert.AreEqual(board.Ficha, &#39;S&#39;);
            // Assert.AreEqual(board.Jugador, &quot;Azul&quot;);
        }
    }

    [TestClass] // Clase de Codigo de Prueba HU.2
    public class TestSelectorModeGame
    {
        private readonly Board board = new Board(6);

        //Criterio de aceptacion 2.1
        [TestMethod]
        public void SelectSimpleGameMode()
        {
            SimpleGame simpleGame;
            simpleGame = new SimpleGame(board);
            Assert.IsTrue(simpleGame is SimpleGame);
        }

        //Criterio de aceptacion 2.2
        [TestMethod]
        public void SelectGeneralGameMode()
        {
            GeneralGame generalGame;
            generalGame = new GeneralGame(board);
            Assert.IsTrue(generalGame is GeneralGame);
        }
    }

    [TestClass] // Clase de Codigo de Prueba HU.3
    public class TestShowGameState
    {
        private readonly Board board = new Board(6);

        //Criterio de aceptacion 3.1
        [TestMethod]
        public void ShowGameState()
        {
            board.InitBoard();
            Assert.AreEqual(Board.GameState.JUGANDO, board.EstadoDeJuego);
        }
    }

    [TestClass] // Clase de Codigo de Prueba HU.4
    public class TestMakeMoveSimple
    {
        private Game game;
        private Player player1, player2;
        private Board board;

        [TestInitialize]
        public void Init()
        {
            board = new Board(3);
            game = new SimpleGame(board);
            player1 = new Human(Board.Jugador.JAZUL);
            player2 = new Human(Board.Jugador.JROJO);
            board.InitBoard();
        }

        [TestCleanup]
        public void Teardown()
        {
        }

        //Criterio de aceptacion 4.1
        [TestMethod]
        public void MakeBlueMoveS_SimpleGame()
        {
            player1.MakeMove(1, 1, Board.Cell.S, game);
            Assert.AreEqual(Board.Cell.S, board.GetCell(1, 1));
            Assert.AreEqual(Board.Jugador.JROJO, board.Turn);
        }

        //Criterio de aceptacion 4.2
        [TestMethod]
        public void MakeRedMoveO_SimpleGame()
        {
            game.MakeMove(0, 0, Board.Cell.S);
            game.MakeMove(2, 2, Board.Cell.O);
            Assert.AreEqual(Board.Cell.O, board.GetCell(2, 2));
            Assert.AreEqual(Board.Jugador.JAZUL, board.Turn);
        }
    }

    [TestClass] // Clase de Codigo de Prueba HU.5
    public class TestSimpleGameVictory
    {
        private SimpleGame game;
        private Board board;

        [TestInitialize]
        public void Init()
        {
            board = new Board(3);
            game = new SimpleGame(board);
            board.InitBoard();
        }

        [TestCleanup]
        public void Teardown()
        {
        }

        //Criterio de aceptacion 5.1
        [TestMethod]
        public void VictorybluePlayerWithS()
        {
            game.MakeMove(0, 0, Board.Cell.S);
            game.MakeMove(0, 1, Board.Cell.O);
            game.MakeMove(1, 1, Board.Cell.O);
            game.MakeMove(0, 2, Board.Cell.O);
            game.MakeMove(2, 2, Board.Cell.S);
            new Consola(board).DisplayBoard();
            Assert.AreEqual(Board.Jugador.JAZUL, board.Turn);
            Assert.AreEqual(Board.Cell.S, board.Ficha);
            Assert.AreEqual(Board.GameState.GANOAZUL, board.EstadoDeJuego);
        }

        //Criterio de aceptacion 5.2
        [TestMethod]
        public void VictoryRedPlayerWithO()
        {
            game.MakeMove(0, 0, Board.Cell.S);
            game.MakeMove(0, 2, Board.Cell.S);
            game.MakeMove(2, 2, Board.Cell.S);
            game.MakeMove(0, 1, Board.Cell.O);
            new Consola(board).DisplayBoard();
            Assert.AreEqual(Board.Jugador.JROJO, board.Turn);
            Assert.AreEqual(Board.Cell.O, board.Ficha);
            Assert.AreEqual(Board.GameState.GANOROJO, board.EstadoDeJuego);
        }
    }

    [TestClass] // Clase de Codigo de Prueba HU.6
    public class TestMakeMoveGeneral
    {
        private Game game;
        private Board board;

        [TestInitialize]
        public void Init()
        {
            board = new Board(3);
            game = new GeneralGame(board);
            board.InitBoard();
        }

        [TestCleanup]
        public void Teardown()
        {
        }

        [TestMethod] //Criterio de aceptacion 6.1
        public void MakeBlueMoveO_GeneralGame()
        {
            game.MakeMove(0, 2, Board.Cell.O);
            Assert.AreEqual(Board.Cell.O, board.GetCell(0, 2));
            Assert.AreEqual(Board.Jugador.JROJO, board.Turn);
        }

        [TestMethod] //Criterio de aceptacion 6.2
        public void MakeRedMoveS_GeneralGame()
        {
            game.MakeMove(0, 0, Board.Cell.O);
            game.MakeMove(2, 2, Board.Cell.S);
            Assert.AreEqual(Board.Cell.S, board.GetCell(2, 2));
            Assert.AreEqual(Board.Jugador.JAZUL, board.Turn);
        }
    }

    [TestClass] // Clase de Codigo de Prueba HU.7
    public class TestGeneralGameVictory
    {
        private GeneralGame game;
        private Board board;

        [TestInitialize]
        public void Init()
        {
            board = new Board(3);
            game = new GeneralGame(board);
            board.InitBoard();
        }

        [TestCleanup]
        public void Teardown()
        {
        }

        //Criterio de aceptacion 7.1
        [TestMethod]
        public void FullBoard()
        {
            var rd = new Random();
            int n;
            for (var i = 0; i &lt; board.Tamanio; i++)
            for (var j = 0; j &lt; board.Tamanio; j++)
            {
                n = rd.Next(100);
                if (n % 2 == 0)
                    game.MakeMove(i, j, Board.Cell.S);
                else
                    game.MakeMove(i, j, Board.Cell.O);
            }

            new Consola(board).DisplayBoard();
            Assert.IsTrue(game.validator.FullBoard());
        }

        //Criterio de aceptacion 7.2
        [TestMethod]
        public void VictoryFullboardBlue()
        {
            game.MakeMove(0, 0, Board.Cell.S);
            ImprimirTest();
            game.MakeMove(1, 1, Board.Cell.O);
            ImprimirTest();
            game.MakeMove(2, 2, Board.Cell.S);
            ImprimirTest();
            game.MakeMove(1, 0, Board.Cell.S);
            ImprimirTest();
            game.MakeMove(0, 1, Board.Cell.S);
            ImprimirTest();
            game.MakeMove(1, 2, Board.Cell.O);
            ImprimirTest();
            game.MakeMove(2, 1, Board.Cell.O);
            ImprimirTest();
            game.MakeMove(0, 2, Board.Cell.O);
            ImprimirTest();
            game.MakeMove(2, 0, Board.Cell.S);
            ImprimirTest();
            Assert.AreEqual(Board.GameState.GANOAZUL, board.EstadoDeJuego);
        }

        public void ImprimirTest()
        {
            new Consola(board).DisplayBoard();
            Console.WriteLine(&quot;Puntaje Azul: &quot; + game.PuntajeAzul);
            Console.WriteLine(&quot;Puntaje Rojo: &quot; + game.PuntajeRojo);
        }

        //Criterio de aceptacion 7.3
        [TestMethod]
        public void VictoryFullboardRed()
        {
            game.MakeMove(0, 0, Board.Cell.S);
            game.MakeMove(0, 1, Board.Cell.S);
            game.MakeMove(0, 2, Board.Cell.S);
            game.MakeMove(1, 0, Board.Cell.O);
            game.MakeMove(1, 1, Board.Cell.S);
            game.MakeMove(1, 2, Board.Cell.S);
            game.MakeMove(2, 1, Board.Cell.S);
            game.MakeMove(2, 0, Board.Cell.S);
            game.MakeMove(2, 2, Board.Cell.O);
            new Consola(board).DisplayBoard();
            Assert.AreEqual(Board.GameState.GANOROJO, board.EstadoDeJuego);
        }

        //Criterio de aceptacion 7.4
        [TestMethod]
        public void DrawFullBoardS()
        {
            for (var i = 0; i &lt; board.Tamanio; i++)
            for (var j = 0; j &lt; board.Tamanio; j++)
                game.MakeMove(i, j, Board.Cell.S);
            new Consola(board).DisplayBoard();
            Assert.AreEqual(Board.GameState.EMPATE, board.EstadoDeJuego);
        }
    }

    [TestClass] // Clase de Codigo de Prueba HU.8
    public class TestSelectTypePlayer
    {
        private readonly Player player1 = new Computer(Board.Jugador.JAZUL);

        private readonly Player player2 = new Computer(Board.Jugador.JROJO);

        //Criterio de aceptacion 8.1
        [TestMethod]
        public void SelectBlueComputerPlayer()
        {
            Assert.IsTrue(player1 is Computer);
            Assert.AreEqual(player1.Jugador, Board.Jugador.JAZUL);
        }

        //Criterio de aceptacion 8.2
        [TestMethod]
        public void SelectRedComputerPlayer()
        {
            Assert.IsTrue(player2 is Computer);
            Assert.AreEqual(player2.Jugador, Board.Jugador.JROJO);
        }
    }

    [TestClass] //Clase de Codigo de Prueba HU.9
    public class TestPlayAgainstComputer
    {
        private Controller controller;

        [TestInitialize]
        public void Init()
        {
            controller = new Controller();
            controller.Board = new Board(3);
            controller.Game = new SimpleGame(controller.Board);
        }

        //Criterio de aceptacion 9.1
        [TestMethod]
        public void ComputerMakesFirstMove()
        {
            controller.Player1 = new Computer(Board.Jugador.JAZUL);
            controller.Player2 = new Human(Board.Jugador.JROJO);
            controller.InitTurn();
            controller.Player1.MakeMove(0, 0, Board.Cell.S, controller.Game);
            Assert.IsTrue(controller.CurrentPlayer is Computer);
            Assert.IsTrue(controller.Board.ValidMove);
            controller.ChangeTurn(); // hace el cambio de turno
            Assert.IsTrue(controller.CurrentPlayer is Human); // valida que se ha hecho el cambio de turno
            new Consola(controller.Board).DisplayBoard();
        }

        //Criterio de aceptacion 9.2
        [TestMethod]
        public void ComputerMakesSecondMove()
        {
            controller.Player1 = new Human(Board.Jugador.JAZUL);
            controller.Player2 = new Computer(Board.Jugador.JROJO);
            controller.InitTurn();
            controller.Player1.MakeMove(0, 0, Board.Cell.S, controller.Game);
            controller.ChangeTurn();
            Assert.IsTrue(controller.CurrentPlayer is Computer);
            controller.Player2.MakeMove(0, 0, Board.Cell.S, controller.Game);
            controller.ChangeTurn();
            Assert.IsTrue(controller.CurrentPlayer is Human);
            new Consola(controller.Board).DisplayBoard();
        }

        //Criterio de aceptacion 9.3
        //Termina cuando haya ganador o empate
        [TestMethod]
        public void ComputerVsComputer()
        {
            controller.Player1 = new Computer(Board.Jugador.JAZUL);
            controller.Player2 = new Computer(Board.Jugador.JROJO);
            while (controller.Board.EstadoDeJuego == Board.GameState.JUGANDO)
            {
                controller.Player1.MakeMove(0, 0, Board.Cell.S, controller.Game);
                controller.Player2.MakeMove(0, 0, Board.Cell.O, controller.Game);
            }

            new Consola(controller.Board).DisplayBoard();
            Assert.IsTrue(controller.Board.EstadoDeJuego != Board.GameState.JUGANDO);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[11,9,11,55,1],[13,9,13,65,1],[18,9,18,10,1],[20,18,20,29,1],[20,31,20,50,1],[20,52,20,57,1],[21,18,21,32,1],[21,34,21,56,1],[21,58,21,66,1],[22,17,22,79,1],[26,9,26,10,1],[32,9,32,53,1],[37,9,37,10,1],[39,13,39,48,1],[40,13,40,53,1],[41,9,41,10,1],[46,9,46,10,1],[48,13,48,50,1],[49,13,49,55,1],[50,9,50,10,1],[56,9,56,53,1],[61,9,61,10,1],[62,13,62,31,1],[63,13,63,75,1],[64,9,64,10,1],[76,9,76,10,1],[77,13,77,34,1],[78,13,78,42,1],[79,13,79,54,1],[80,13,80,54,1],[81,13,81,31,1],[82,9,82,10,1],[86,9,86,10,1],[87,9,87,10,1],[92,9,92,10,1],[93,13,93,56,1],[94,13,94,64,1],[95,13,95,62,1],[96,9,96,10,1],[101,9,101,10,1],[102,13,102,47,1],[103,13,103,47,1],[104,13,104,64,1],[105,13,105,62,1],[106,9,106,10,1],[117,9,117,10,1],[118,13,118,34,1],[119,13,119,42,1],[120,13,120,31,1],[121,9,121,10,1],[125,9,125,10,1],[126,9,126,10,1],[131,9,131,10,1],[132,13,132,47,1],[133,13,133,47,1],[134,13,134,47,1],[135,13,135,47,1],[136,13,136,47,1],[137,13,137,47,1],[138,13,138,62,1],[139,13,139,56,1],[140,13,140,76,1],[141,9,141,10,1],[146,9,146,10,1],[147,13,147,47,1],[148,13,148,47,1],[149,13,149,47,1],[150,13,150,47,1],[151,13,151,47,1],[152,13,152,62,1],[153,13,153,56,1],[154,13,154,76,1],[155,9,155,10,1],[166,9,166,10,1],[167,13,167,34,1],[168,13,168,43,1],[169,13,169,31,1],[170,9,170,10,1],[174,9,174,10,1],[175,9,175,10,1],[179,9,179,10,1],[180,13,180,47,1],[181,13,181,64,1],[182,13,182,62,1],[183,9,183,10,1],[187,9,187,10,1],[188,13,188,47,1],[189,13,189,47,1],[190,13,190,64,1],[191,13,191,62,1],[192,9,192,10,1],[203,9,203,10,1],[204,13,204,34,1],[205,13,205,43,1],[206,13,206,31,1],[207,9,207,10,1],[211,9,211,10,1],[212,9,212,10,1],[217,9,217,10,1],[218,13,218,35,1],[220,18,220,27,1],[220,29,220,46,1],[220,48,220,51,1],[221,18,221,27,1],[221,29,221,46,1],[221,48,221,51,1],[222,13,222,14,1],[223,17,223,34,1],[224,17,224,32,1],[225,21,225,55,1],[227,21,227,55,1],[228,13,228,14,1],[230,13,230,47,1],[231,13,231,55,1],[232,9,232,10,1],[237,9,237,10,1],[238,13,238,47,1],[239,13,239,28,1],[240,13,240,47,1],[241,13,241,28,1],[242,13,242,47,1],[243,13,243,28,1],[244,13,244,47,1],[245,13,245,28,1],[246,13,246,47,1],[247,13,247,28,1],[248,13,248,47,1],[249,13,249,28,1],[250,13,250,47,1],[251,13,251,28,1],[252,13,252,47,1],[253,13,253,28,1],[254,13,254,47,1],[255,13,255,28,1],[256,13,256,76,1],[257,9,257,10,1],[260,9,260,10,1],[261,13,261,47,1],[262,13,262,68,1],[263,13,263,68,1],[264,9,264,10,1],[269,9,269,10,1],[270,13,270,47,1],[271,13,271,47,1],[272,13,272,47,1],[273,13,273,47,1],[274,13,274,47,1],[275,13,275,47,1],[276,13,276,47,1],[277,13,277,47,1],[278,13,278,47,1],[279,13,279,47,1],[280,13,280,76,1],[281,9,281,10,1],[286,9,286,10,1],[287,18,287,27,1],[287,29,287,46,1],[287,48,287,51,1],[288,18,288,27,1],[288,29,288,46,1],[288,48,288,51,1],[289,17,289,51,1],[290,13,290,47,1],[291,13,291,74,1],[292,9,292,10,1],[298,9,298,77,1],[300,9,300,77,1],[305,9,305,10,1],[306,13,306,48,1],[307,13,307,67,1],[308,9,308,10,1],[313,9,313,10,1],[314,13,314,48,1],[315,13,315,67,1],[316,9,316,10,1],[326,9,326,10,1],[327,13,327,43,1],[328,13,328,45,1],[329,13,329,64,1],[330,9,330,10,1],[335,9,335,10,1],[336,13,336,68,1],[337,13,337,65,1],[338,13,338,35,1],[339,13,339,78,1],[340,13,340,65,1],[341,13,341,55,1],[342,13,342,37,1],[343,13,343,62,1],[344,13,344,58,1],[345,9,345,10,1],[350,9,350,10,1],[351,13,351,65,1],[352,13,352,68,1],[353,13,353,35,1],[354,13,354,78,1],[355,13,355,37,1],[356,13,356,65,1],[357,13,357,78,1],[358,13,358,37,1],[359,13,359,62,1],[360,13,360,58,1],[361,9,361,10,1],[367,9,367,10,1],[368,13,368,68,1],[369,13,369,68,1],[370,13,370,78,1],[371,13,371,14,1],[372,17,372,82,1],[373,17,373,82,1],[374,13,374,14,1],[376,13,376,58,1],[377,13,377,86,1],[378,9,378,10,1]]);
    </script>
  </body>
</html>